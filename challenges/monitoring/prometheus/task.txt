ğŸ§© Kadirâ€™s Tech Playground â€“ Monitoring Challenge
================================================

Challenge Title:
----------------
â€œSee What Your Containers Are Doing (API Edition)â€

Objective:
----------
Youâ€™ll deploy a monitoring stack with Prometheus, Grafana, and a Flask API that exposes `/api/customers` metrics.
Your goal is to observe, interpret, and explain whatâ€™s happening inside your containers.

Stack Overview:
---------------
| Service        | Purpose                          | Port  |
|----------------|----------------------------------|-------|
| prometheus     | Collects and stores metrics      | 9090  |
| grafana        | Visualizes metrics               | 3000  |
| flask-api      | Sample API exposing /metrics     | 5000  |

Prometheus scrapes all of these targets. Grafana visualizes them.

------------------------------------------------------------
âš™ï¸ Task 1 â€“ Deploy the Stack
------------------------------------------------------------
From your challenge directory:

  cd ~/challenge/prometheus
  docker compose up -d

Verify containers are running:

  docker ps

âœ… Expected: prometheus, grafana and flask-api are â€œUpâ€.

------------------------------------------------------------
ğŸ” Task 2 â€“ Explore Prometheus
------------------------------------------------------------
Open Prometheus:

  http://localhost:9090

Go to **Status â†’ Targets**
You should see:

  prometheus:9090
  flask-api:5000

âœ… All should be UP.

------------------------------------------------------------
ğŸ“¡ Task 3 â€“ Inspect Flask API Metrics
------------------------------------------------------------
Prometheus scrapes `/metrics` from the Flask container.

Try these queries:

  api_requests_total
  rate(api_requests_total[1m])
  api_request_latency_seconds_bucket

Observe how these metrics evolve over time.
Something inside your stack seems to generate periodic activity â€” can you identify what it is?

------------------------------------------------------------
ğŸ§ª Task 4 â€“ Investigate the API Container
------------------------------------------------------------
Check the logs inside the Flask container:

  docker logs -f flask-api

Or inspect the log directory:

  docker exec -it flask-api ls /var/log

One of the log files holds the key to understanding the repeating pattern.

------------------------------------------------------------
ğŸ“Š Task 5 â€“ Connect Grafana
------------------------------------------------------------
Access Grafana:

  http://localhost:3000
  Login: admin / admin

Add Prometheus as a data source:
  URL: http://prometheus:9090

Create a new **Time Series** panel and run:

  rate(api_requests_total[1m])

You should begin to see a pattern forming in the graph â€” but whatâ€™s causing it?

------------------------------------------------------------
ğŸ§­ Task 6 â€“ Dig Deeper (Optional)
------------------------------------------------------------
- Create a panel for average request latency:
    histogram_quantile(0.95, sum(rate(api_request_latency_seconds_bucket[1m])) by (le))
- Compare request rate vs. CPU or memory usage.
- Predict what would happen if the request frequency changed.

------------------------------------------------------------
ğŸ¯ Mission Summary
------------------------------------------------------------
âœ… Prometheus scrapes multiple targets
âœ… Grafana visualizes live metrics
âœ… The API produces measurable behaviour over time
âœ… Youâ€™ve built your first observability stack

------------------------------------------------------------
ğŸ§  Next Week
------------------------------------------------------------
â€œDashboards & Alerts â€“ When Metrics Start Talking Back.â€

Youâ€™ll create Grafana dashboards, add exporters, and build simple alert rules.

------------------------------------------------------------
ğŸ’¡ Need help?
------------------------------------------------------------
If you get stuck, read the `HINTS.md` file for subtle clues.
Avoid looking for direct answers â€” the real learning is in finding out *why* your metrics look the way they do.

Bonus Question:
---------------
How does Prometheus decide when to scrape a target, and what happens if it misses one interval?
Write your answer in one clear sentence.
